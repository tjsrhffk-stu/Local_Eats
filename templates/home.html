{% extends 'base.html' %}
{% block title %}LocalEats â€” ì§„ì§œ ë§›ì§‘ì„ ì°¾ì•„ì„œ{% endblock %}

{% block extra_css %}
<style>
  main { padding: 0 !important; max-width: none !important; }

  /* HERO */
  .hero {
    position: relative; overflow: hidden;
    background: var(--text);
    min-height: 580px;
    display: flex; align-items: center;
  }
  .hero-bg {
    position: absolute; inset: 0;
    background: linear-gradient(135deg, #1A1510 0%, #2A1E14 50%, #1A1510 100%);
  }
  .hero-pattern {
    position: absolute; inset: 0; opacity: 0.04;
    background-image: radial-gradient(circle, #fff 1px, transparent 1px);
    background-size: 32px 32px;
  }
  .hero-accent {
    position: absolute; top: -100px; right: -100px;
    width: 500px; height: 500px; border-radius: 50%;
    background: radial-gradient(circle, rgba(212,82,26,0.3) 0%, transparent 70%);
    animation: pulse 6s ease-in-out infinite;
  }
  @keyframes pulse { 0%,100% { transform: scale(1); opacity: 0.3; } 50% { transform: scale(1.1); opacity: 0.5; } }

  .hero-inner {
    max-width: 1200px; margin: 0 auto; padding: 80px 24px;
    position: relative; z-index: 1;
    display: grid; grid-template-columns: 1fr 1fr; gap: 64px; align-items: center;
  }
  .hero-badge {
    display: inline-flex; align-items: center; gap: 8px;
    background: rgba(212,82,26,0.2); border: 1px solid rgba(212,82,26,0.4);
    color: #E8A080; font-size: 12px; font-weight: 600; letter-spacing: 1.5px;
    text-transform: uppercase; padding: 6px 14px; border-radius: 100px;
    margin-bottom: 24px;
    animation: fadeUp 0.6s ease both;
  }
  .hero-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(40px, 5vw, 64px); font-weight: 700;
    color: #F0EDE8; line-height: 1.1; margin-bottom: 20px;
    animation: fadeUp 0.6s 0.1s ease both;
  }
  .hero-title em { color: var(--accent); font-style: normal; }
  .hero-desc {
    color: #9A938A; font-size: 17px; line-height: 1.7; margin-bottom: 36px;
    animation: fadeUp 0.6s 0.2s ease both;
  }
  .hero-actions {
    display: flex; gap: 12px; flex-wrap: wrap;
    animation: fadeUp 0.6s 0.3s ease both;
  }
  .btn-hero {
    padding: 14px 28px; border-radius: 12px; font-size: 15px; font-weight: 600;
    text-decoration: none; transition: all 0.25s;
    display: inline-flex; align-items: center; gap: 8px;
  }
  .btn-hero-primary { background: var(--accent); color: #fff; }
  .btn-hero-primary:hover { background: #B8431A; transform: translateY(-2px); box-shadow: 0 8px 24px rgba(212,82,26,0.35); }
  .btn-hero-ghost { background: rgba(255,255,255,0.08); color: #C8C0B8; border: 1px solid rgba(255,255,255,0.12); }
  .btn-hero-ghost:hover { background: rgba(255,255,255,0.14); color: #F0EDE8; }

  /* HERO SEARCH */
  .hero-search {
    animation: fadeUp 0.6s 0.15s ease both;
  }
  .search-card {
    background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1);
    border-radius: 20px; padding: 28px; backdrop-filter: blur(12px);
  }
  .search-card h3 { color: #F0EDE8; font-size: 18px; margin-bottom: 20px; font-weight: 600; }
  .search-input-wrap { position: relative; margin-bottom: 14px; }
  .search-input-wrap input {
    width: 100%; padding: 14px 18px 14px 44px;
    background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.12);
    border-radius: 12px; color: #F0EDE8; font-size: 15px; font-family: 'DM Sans', sans-serif;
    outline: none; transition: all 0.2s;
  }
  .search-input-wrap input::placeholder { color: #6B6560; }
  .search-input-wrap input:focus { background: rgba(255,255,255,0.12); border-color: var(--accent); }
  .search-icon { position: absolute; left: 14px; top: 50%; transform: translateY(-50%); font-size: 18px; }
  .filter-row { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 16px; }
  .filter-chip {
    padding: 7px 14px; border-radius: 100px; font-size: 13px; font-weight: 500;
    background: rgba(255,255,255,0.06); color: #9A938A;
    border: 1px solid rgba(255,255,255,0.1); cursor: pointer; transition: all 0.2s;
  }
  .filter-chip:hover, .filter-chip.active {
    background: rgba(212,82,26,0.2); color: #E8A080; border-color: rgba(212,82,26,0.4);
  }
  .search-btn {
    width: 100%; padding: 13px; background: var(--accent); color: #fff;
    border: none; border-radius: 12px; font-size: 15px; font-weight: 600;
    cursor: pointer; font-family: 'DM Sans', sans-serif; transition: all 0.2s;
  }
  .search-btn:hover { background: #B8431A; }

  @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

  /* STATS */
  .stats-bar {
    background: var(--surface); border-bottom: 1px solid var(--border);
    padding: 24px;
  }
  .stats-inner {
    max-width: 1200px; margin: 0 auto;
    display: flex; justify-content: center; gap: 64px; flex-wrap: wrap;
  }
  .stat { text-align: center; }
  .stat-num {
    font-family: 'Playfair Display', serif;
    font-size: 32px; font-weight: 700; color: var(--accent);
    display: block;
  }
  .stat-label { font-size: 13px; color: var(--text2); margin-top: 2px; }

  /* SECTIONS */
  .section { max-width: 1200px; margin: 0 auto; padding: 64px 24px; }
  .section-header { display: flex; align-items: baseline; justify-content: space-between; margin-bottom: 36px; }
  .section-title {
    font-family: 'Playfair Display', serif;
    font-size: 32px; font-weight: 700; color: var(--text);
  }
  .section-link { font-size: 14px; color: var(--accent); text-decoration: none; font-weight: 600; }
  .section-link:hover { text-decoration: underline; }

  /* RESTAURANT CARDS */
  .cards-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 24px; }
  .restaurant-card {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: var(--radius); overflow: hidden;
    box-shadow: var(--shadow); transition: all var(--transition);
    text-decoration: none; color: inherit; display: block;
    animation: fadeUp 0.5s ease both;
  }
  .restaurant-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-hover); border-color: var(--accent); }
  .card-img {
    height: 180px; background: var(--bg2); position: relative;
    display: flex; align-items: center; justify-content: center;
    font-size: 56px; overflow: hidden;
  }
  .card-img-overlay {
    position: absolute; inset: 0;
    background: linear-gradient(to top, rgba(0,0,0,0.3) 0%, transparent 60%);
  }
  .card-badge {
    position: absolute; top: 12px; left: 12px;
    background: var(--accent); color: #fff;
    font-size: 11px; font-weight: 700; padding: 4px 10px; border-radius: 100px;
    letter-spacing: 0.5px;
  }
  .card-body { padding: 20px; }
  .card-name {
    font-size: 17px; font-weight: 600; margin-bottom: 6px;
    color: var(--text);
  }
  .card-meta { font-size: 13px; color: var(--text2); margin-bottom: 12px; }
  .card-stars { display: flex; align-items: center; gap: 6px; }
  .stars { display: flex; gap: 2px; }
  .stars span { font-size: 15px; }
  .stars .on { color: var(--star-on); }
  .stars .off { color: var(--star-off); }
  .card-count { font-size: 13px; color: var(--text2); }

  /* CATEGORIES */
  .categories { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 16px; }
  .cat-item {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 14px; padding: 24px 16px;
    text-align: center; text-decoration: none; color: var(--text);
    transition: all var(--transition);
    display: flex; flex-direction: column; gap: 10px; align-items: center;
  }
  .cat-item:hover { border-color: var(--accent); background: var(--accent-light); transform: translateY(-2px); }
  .cat-icon { font-size: 36px; }
  .cat-name { font-size: 13px; font-weight: 600; }

  /* CTA */
  .cta-section {
    background: var(--text);
    padding: 80px 24px; text-align: center;
  }
  .cta-inner { max-width: 560px; margin: 0 auto; }
  .cta-title {
    font-family: 'Playfair Display', serif;
    font-size: 40px; font-weight: 700; color: #F0EDE8;
    margin-bottom: 16px;
  }
  .cta-desc { color: #9A938A; font-size: 16px; margin-bottom: 32px; line-height: 1.6; }
  .cta-btn {
    display: inline-block; padding: 16px 36px;
    background: var(--accent); color: #fff;
    border-radius: 14px; font-size: 16px; font-weight: 600;
    text-decoration: none; transition: all 0.25s;
  }
  .cta-btn:hover { background: #B8431A; transform: translateY(-2px); box-shadow: 0 8px 24px rgba(212,82,26,0.4); }

  @media (max-width: 768px) {
    .hero-inner { grid-template-columns: 1fr; gap: 40px; }
    .stats-inner { gap: 32px; }
  }
</style>
{% endblock %}

{% block content %}
<!-- HERO -->
<section class="hero">
  <div class="hero-bg"></div>
  <div class="hero-pattern"></div>
  <div class="hero-accent"></div>
  <div class="hero-inner">
    <div>
      <div class="hero-badge">ğŸ½ï¸ &nbsp;ë§›ì§‘ ë¦¬ë·° í”Œë«í¼</div>
      <h1 class="hero-title">ì§„ì§œ <em>ë§›ì§‘</em>ì„<br>ì°¾ì•„ë“œë¦½ë‹ˆë‹¤</h1>
      <p class="hero-desc">ì´ì›ƒë“¤ì˜ ì†”ì§í•œ ë¦¬ë·°ë¡œ<br>ë‹¹ì‹ ë§Œì˜ ë‹¨ê³¨ì§‘ì„ ë°œê²¬í•˜ì„¸ìš”.</p>
      <div class="hero-actions">
        <a href="/restaurants/" class="btn-hero btn-hero-primary">ğŸ—ºï¸ ìŒì‹ì  ë‘˜ëŸ¬ë³´ê¸°</a>
        <a href="/users/signup/" class="btn-hero btn-hero-ghost">âœï¸ ë¦¬ë·° ì‘ì„±í•˜ê¸°</a>
      </div>
    </div>
    <div class="hero-search">
      <div class="search-card">
        <h3>ğŸ” ìŒì‹ì  ê²€ìƒ‰</h3>
        <form method="GET" action="/restaurants/">
          <div class="search-input-wrap">
            <span class="search-icon">ğŸª</span>
            <input type="text" name="q" placeholder="ìŒì‹ì  ì´ë¦„ì´ë‚˜ ì¹´í…Œê³ ë¦¬..." autocomplete="off">
          </div>
          <div class="filter-row" id="filterChips">
            <span class="filter-chip active" data-val="">ì „ì²´</span>
            <span class="filter-chip" data-val="í•œì‹">í•œì‹</span>
            <span class="filter-chip" data-val="ì¼ì‹">ì¼ì‹</span>
            <span class="filter-chip" data-val="ì–‘ì‹">ì–‘ì‹</span>
            <span class="filter-chip" data-val="ì¤‘ì‹">ì¤‘ì‹</span>
            <span class="filter-chip" data-val="ì¹´í˜">ì¹´í˜</span>
          </div>
          <input type="hidden" name="category" id="categoryInput">
          <button type="submit" class="search-btn">ê²€ìƒ‰í•˜ê¸° â†’</button>
        </form>
      </div>
    </div>
  </div>
</section>

<!-- STATS -->
<div class="stats-bar">
  <div class="stats-inner">
    <div class="stat"><span class="stat-num">{{ restaurant_count|default:"128" }}+</span><div class="stat-label">ë“±ë¡ëœ ìŒì‹ì </div></div>
    <div class="stat"><span class="stat-num">{{ review_count|default:"1,240" }}+</span><div class="stat-label">ì†”ì§í•œ ë¦¬ë·°</div></div>
    <div class="stat"><span class="stat-num">{{ user_count|default:"3,800" }}+</span><div class="stat-label">í™œì„± ì‚¬ìš©ì</div></div>
    <div class="stat"><span class="stat-num">4.6â˜…</span><div class="stat-label">í‰ê·  ë§Œì¡±ë„</div></div>
  </div>
</div>

<!-- FEATURED -->
<section class="section">
  <div class="section-header">
    <h2 class="section-title">ì´ë²ˆ ì£¼ ì¸ê¸° ë§›ì§‘</h2>
    <a href="/restaurants/" class="section-link">ì „ì²´ ë³´ê¸° â†’</a>
  </div>
  <div class="cards-grid">
    {% for restaurant in featured_restaurants %}
    <a href="/restaurants/{{ restaurant.pk }}/" class="restaurant-card" style="animation-delay: {{ forloop.counter0 }}00ms">
      <div class="card-img">
        {% if restaurant.image %}<img src="{{ restaurant.image.url }}" style="width:100%;height:100%;object-fit:cover;position:absolute;inset:0">{% else %}ğŸ½ï¸{% endif %}
        <div class="card-img-overlay"></div>
        {% if forloop.first %}<span class="card-badge">ğŸ”¥ ì¸ê¸°</span>{% endif %}
      </div>
      <div class="card-body">
        <div class="card-name">{{ restaurant.name }}</div>
        <div class="card-meta">{{ restaurant.category }} &nbsp;Â·&nbsp; {{ restaurant.address|truncatechars:20 }}</div>
        <div class="card-stars">
          <div class="stars">
            {% for i in "12345" %}
              {% if forloop.counter <= restaurant.avg_rating|default:0 %}
                <span class="on">â˜…</span>
              {% else %}
                <span class="off">â˜…</span>
              {% endif %}
            {% endfor %}
          </div>
          <span class="card-count">{{ restaurant.avg_rating|default:"â€”" }} ({{ restaurant.review_count|default:0 }}ê°œ)</span>
        </div>
      </div>
    </a>
    {% empty %}
    <!-- ë”ë¯¸ ì¹´ë“œ (ë°ì´í„° ì—†ì„ ë•Œ) -->
    {% for i in "123456" %}
    <a href="/restaurants/" class="restaurant-card" style="animation-delay: {{ forloop.counter0 }}00ms">
      <div class="card-img">
        <span>{% if forloop.counter == 1 %}ğŸœ{% elif forloop.counter == 2 %}ğŸ£{% elif forloop.counter == 3 %}ğŸ”{% elif forloop.counter == 4 %}ğŸ¥˜{% elif forloop.counter == 5 %}â˜•{% else %}ğŸ•{% endif %}</span>
        <div class="card-img-overlay"></div>
        {% if forloop.first %}<span class="card-badge">ğŸ”¥ ì¸ê¸°</span>{% endif %}
      </div>
      <div class="card-body">
        <div class="card-name">ìŒì‹ì  ì´ë¦„</div>
        <div class="card-meta">ì¹´í…Œê³ ë¦¬ &nbsp;Â·&nbsp; ì£¼ì†Œ</div>
        <div class="card-stars">
          <div class="stars">
            <span class="on">â˜…</span><span class="on">â˜…</span><span class="on">â˜…</span><span class="on">â˜…</span><span class="off">â˜…</span>
          </div>
          <span class="card-count">4.0 (12ê°œ)</span>
        </div>
      </div>
    </a>
    {% endfor %}
    {% endfor %}
  </div>
</section>

<!-- CATEGORIES -->
<div style="background: var(--bg2)">
  <section class="section">
    <div class="section-header">
      <h2 class="section-title">ì¹´í…Œê³ ë¦¬ë³„ íƒìƒ‰</h2>
    </div>
    <div class="categories">
      <a href="/restaurants/?category=í•œì‹" class="cat-item"><span class="cat-icon">ğŸš</span><span class="cat-name">í•œì‹</span></a>
      <a href="/restaurants/?category=ì¼ì‹" class="cat-item"><span class="cat-icon">ğŸ£</span><span class="cat-name">ì¼ì‹</span></a>
      <a href="/restaurants/?category=ì–‘ì‹" class="cat-item"><span class="cat-icon">ğŸ</span><span class="cat-name">ì–‘ì‹</span></a>
      <a href="/restaurants/?category=ì¤‘ì‹" class="cat-item"><span class="cat-icon">ğŸ¥Ÿ</span><span class="cat-name">ì¤‘ì‹</span></a>
      <a href="/restaurants/?category=ì¹´í˜" class="cat-item"><span class="cat-icon">â˜•</span><span class="cat-name">ì¹´í˜</span></a>
      <a href="/restaurants/?category=íŒ¨ìŠ¤íŠ¸í‘¸ë“œ" class="cat-item"><span class="cat-icon">ğŸ”</span><span class="cat-name">íŒ¨ìŠ¤íŠ¸í‘¸ë“œ</span></a>
      <a href="/restaurants/?category=ë¶„ì‹" class="cat-item"><span class="cat-icon">ğŸ¥š</span><span class="cat-name">ë¶„ì‹</span></a>
      <a href="/restaurants/?category=ë””ì €íŠ¸" class="cat-item"><span class="cat-icon">ğŸ°</span><span class="cat-name">ë””ì €íŠ¸</span></a>
    </div>
  </section>
</div>

<!-- CTA -->
<section class="cta-section">
  <div class="cta-inner">
    <h2 class="cta-title">ë‹¹ì‹ ì˜ ê²½í—˜ì„<br>ë‚˜ëˆ ì£¼ì„¸ìš”</h2>
    <p class="cta-desc">ë°©ë¬¸í•œ ë§›ì§‘ì˜ ì†”ì§í•œ ë¦¬ë·°ë¡œ<br>ë‹¤ë¥¸ ì‚¬ëŒë“¤ì´ ë” ì¢‹ì€ ì„ íƒì„ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ì„¸ìš”.</p>
    <a href="{% if user.is_authenticated %}/restaurants/{% else %}/users/login/{% endif %}" class="cta-btn">ë¦¬ë·° ì“°ëŸ¬ ê°€ê¸° â†’</a>
  </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
  // Filter chips
  document.querySelectorAll('.filter-chip').forEach(chip => {
    chip.addEventListener('click', () => {
      document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
      chip.classList.add('active');
      document.getElementById('categoryInput').value = chip.dataset.val;
    });
  });
</script>
{% endblock %}